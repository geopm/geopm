geopm_agent_frequency_map(7) --  agent for setting fixed CPU, Uncore, and Accelerator frequencies
======================================================================================

[//]: # (Copyright (c) 2015 - 2021, Intel Corporation)
[//]: # ()
[//]: # (Redistribution and use in source and binary forms, with or without)
[//]: # (modification, are permitted provided that the following conditions)
[//]: # (are met:)
[//]: # ()
[//]: # (    * Redistributions of source code must retain the above copyright)
[//]: # (      notice, this list of conditions and the following disclaimer.)
[//]: # ()
[//]: # (    * Redistributions in binary form must reproduce the above copyright)
[//]: # (      notice, this list of conditions and the following disclaimer in)
[//]: # (      the documentation and/or other materials provided with the)
[//]: # (      distribution.)
[//]: # ()
[//]: # (    * Neither the name of Intel Corporation nor the names of its)
[//]: # (      contributors may be used to endorse or promote products derived)
[//]: # (      from this software without specific prior written permission.)
[//]: # ()
[//]: # (THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS)
[//]: # ("AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT)
[//]: # (LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR)
[//]: # (A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT)
[//]: # (OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,)
[//]: # (SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT)
[//]: # (LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,)
[//]: # (DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY)
[//]: # (THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT)
[//]: # ((INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY LOG OF THE USE)
[//]: # (OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.)

## DESCRIPTION
The fixed frequency agent adjusts the CPU, Uncore, and Accelerator frequencies
based upon the agent policy.  The Agent policy provides a single frequency value
for all three frequency domains.  The uncore policy value is used to set both
the minimum and maximum.  If the policy value for the CPU or Uncore is NAN,
the frequency of that domain is not modified.  If the policy value for the
Accelerator is NAN, the maximum Accelerator frequency is used.

## AGENT NAME
The agent described in this manual is selected in many geopm
interfaces with the "fixed_frequency" agent name.  This name can be
passed to **geopmlaunch(1)** as the argument to the `--geopm-agent`
option, or the `GEOPM_AGENT` environment variable can be set to this
name (see **geopm(7)**).  This name can also be passed to the
**geopmagent(1)** as the argument to the '-a' option.

## POLICY PARAMETERS

  `ACCELERATOR_FREQUENCY`: The operating frequency in units of Hz for the
                           Board Accelerators.  Setting it to a NAN will
                           result in the system default value.
  `CPU_FREQUENCY`: The operating frequency in units of Hz for all CPUs.
                   Setting it to a NAN will result in the system default
                   value.
  `UNCORE_FREQUENCY`: The operating frequency in units of Hz for the uncore
                      domain.  If specified the uncore clock will operate
                      the fixed frequency provided.  If the parameter is
                      NAN, then the system default range of uncore frequency
                      will be allowed.

## POLICY REQUIREMENTS
The fixed frequency values must be in the order of ACCELERATOR_FREQUENCY,
CPU_FREQUENCY, UNCORE_FREQUENCY.  A value must be provided, but can be NAN.

## REPORT EXTENSIONS
None

## CONTROL LOOP RATE
The agent gates the control loop to sample the region hash and control
CPU frequency at 50 millisecond intervals.  If the uncore frequency is
specified in the policy, then it is set at agent start up time.


## EXAMPLES
The recommended way to generate a policy file for this agent is to use the
**geopmagent(1)** command line tool.

To create a policy with an accelerator frequency of 1.53 GHz, a core
frequency of 3.1 GHz, and an uncore frequency of 2 GHz

    geopmagent -a fixed_frequency -p '1.530e9,3.1e9,2e9'

Although the **geopmagent(1)** is the recommended tool for creating
the json policy string, the json string without this tool can be used.
For example, the above policy json is:

    {"ACCELERATOR_FREQUENCY": 1530000000,
     "CORE_FREQUENCY": 3100000000,
     "UNCORE_FREQUENCY": 2000000000}

The **geopmread(1)** command line tool can be useful for learning the
bounds of these system parameters.

The minimum and maximum accelerator frequencies are queried as below:

    $ geopmread NVML::FREQUENCY_MIN board 0
    135000000

    $ geopmread NVML::FREQUENCY_MAX board 0
    1530000000

The minimum, sticker, and maximum CPU frequencies are queried as below:

    $ geopmread FREQUENCY_MIN board 0
    1000000000

    $ geopmread FREQUENCY_STICKER board 0
    2400000000

    $ geopmread FREQUENCY_MAX board 0
    3700000000

The minimum, and maximum uncore frequencies are queried as below:

    $ geopmread MSR::UNCORE_RATIO_LIMIT:MIN_RATIO board 0
    1200000000

    $ geopmread MSR::UNCORE_RATIO_LIMIT:MAX_RATIO board 0
    2400000000


## COPYRIGHT
Copyright (c) 2015 - 2021, Intel Corporation. All rights reserved.

## SEE ALSO
**geopm(7)**,
**geopm_agent_energy_efficient(7)**,
**geopm_agent_frequency_map(7)**,
**geopm_agent_power_balancer(7)**,
**geopm_agent_power_governor(7)**,
**geopm::Agent(3)**,
**geopm_agent_c(3)**,
**geopmagent(1)**,
**geopmlaunch(1)**
